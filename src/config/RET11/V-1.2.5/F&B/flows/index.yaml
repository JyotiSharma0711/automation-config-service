flows:
  - id: FULL_CATALOG
    description: User uses station code for searching bus
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
        inputs:
          - label: Options
            name: options
            type: checkbox
            options:
              - code: "promo"
                name: "Promotions"
              - code: "demandSignal"
                name: "Demand Signal"
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
  - id: INCREMENTAL_CATALOG
    description: User uses station code for searching bus
    sequence:
      - key: search_1
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_1
        owner: BAP
        expect: true
        input:
          - name: search_mode
            display: false
            default: start
      - key: on_search_1
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: on_search_2
        type: on_search
        unsolicited: true
        description: LSP responds with catalog
        pair: null
        owner: BPP
      # - key: search_1
      #   type: search
      #   unsolicited: false
      #   description: LBNP sends a search request
      #   pair: ""
      #   owner: BAP
      #   expect: true
      #   input:
      #     - name: search_mode
      #       display: false
      #       default: stop
  - id: ORDER_FLOW
    description: User uses station code for searching bus
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: providerId
            label: Enter provider id
            type: text
          - name: locationId
            label: Enter location id
            type: text
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "110088"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: track
        type: track
        unsolicited: false
        description: LBNP sends a track request
        pair: on_track
        owner: BAP
        expect: false
      - key: on_track
        type: on_track
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
  - id: OUT_OF_STOCK
    description: Retail 1.2.5 (Out Of Stock)
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select_oos
        type: select
        unsolicited: false
        pair: on_select_oos
        owner: BAP
        expect: false
        input:
          - label: Items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
        description: BAP may add unavailable or out-of-stock items to the cart
      - key: on_select_oos
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
        description: BPP returns item breakup when item is out of stock
        input:
          - label: Enter Item id for Out of stock item
            name: oosItem
            type: text
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
  - id: BUYER_CANCEL
    description: Retail 1.2.5 (Buyer Side Order Cancellation)
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: cancel
        type: cancel
        unsolicited: false
        pair: on_cancel
        owner: BAP
        expect: false
        description: Buyer request for the cancellation of the order
      - key: on_cancel
        type: on_cancel
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
        description: Seller confirms the cancellation of the order
  - id: RTO_PLUS_PART_CANCELLATION
    description: Retail 1.2.5 (Seller Side Order Cancellation RTO)
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: providerId
            label: Enter provider id
            type: text
          - name: locationId
            label: Enter location id
            type: text
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "110088"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_update_part_cancel
        type: on_update
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: update_settelment
        type: update
        unsolicited: false
        pair: null
        owner: BAP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: track
        type: track
        unsolicited: false
        description: LBNP sends a track request
        pair: on_track
        owner: BAP
        expect: false
      - key: on_track
        type: on_track
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
  - id: RETURN_FLOW
    description: Retail 1.2.5 (Liquidation)
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: providerId
            label: Enter provider id
            type: text
          - name: locationId
            label: Enter location id
            type: text
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "110088"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: track
        type: track
        unsolicited: false
        description: LBNP sends a track request
        pair: on_track
        owner: BAP
        expect: false
      - key: on_track
        type: on_track
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: update_return
        type: update
        unsolicited: false
        pair: null
        owner: BAP
        expect: false
        input:
          - label: Select Item id to return
            name: returnItemId
            type: text
          - label: Select Return reason
            name: returnReason
            type: select
            values:
              - "001"
              - "002"
              - "003"
              - "004"
              - "005"
  - id: FORCE_CANCEL
    description: Retail 1.2.5 (Buyer Side Order Cancellation)
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: cancel
        type: cancel
        unsolicited: false
        pair: null
        owner: BAP
        expect: false
        description: Buyer request for the cancellation of the order
      - key: cancel_force
        type: cancel
        unsolicited: true
        pair: on_cancel
        owner: BAP
        expect: false
        description: Buyer request for the cancellation of the order
      - key: on_cancel
        type: on_cancel
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
        description: Seller confirms the cancellation of the order
  - id: SELF_PICKUP
    description: User pickes the order themselfs
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select_multiple_fulfillment
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
      - key: on_select_multiple_fulfillment
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
        input:
          - name: fulfillmentType
            label: Fulfillment type
            type: text
            display: false
            default: Self-Pickup
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_self_delivery_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
  - id: SLOTTED_DELIVERY
    description: User pickes the order themselfs
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select_multiple_fulfillment
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "560001"
      - key: on_select_multiple_fulfillment
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init_multiple_fulfillment
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
        input:
          - name: selectedFulfillment
            label: Select Fulfillment Id
            type: text
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
  - id: BUYER INSTRUCTIONS AND ADDRESS UPDATE FLOW
    description: User uses station code for searching bus
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: providerId
            label: Enter provider id
            type: text
          - name: locationId
            label: Enter location id
            type: text
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "110088"
          - label: Options
            name: options
            type: checkbox
            options:
              - code: "demandSignal"
                name: "Demand Signal"
            display: false
            default: demandSignal
      - key: on_select
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init
        type: init
        unsolicited: false
        pair: on_init
        owner: BAP
        expect: false
      - key: on_init
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: update_address
        type: update
        unsolicited: false
        pair: on_update_address
        owner: BAP
        expect: false
      - key: on_update_address
        type: on_update
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: update_buyer_inst
        type: update
        unsolicited: false
        pair: on_update_buyer_inst
        owner: BAP
        expect: false
      - key: on_update_buyer_inst
        type: on_update
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_update_delivery_auth
        type: on_update
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
  - id: MULTI_OPTION_FULFILLMENT_FLOW
    description: User uses station code for searching bus
    sequence:
      - key: search
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search
        owner: BAP
        expect: true
      - key: on_search
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: npType
            label: Select a type
            type: select
            values:
              - ISN
              - MSN
            default: MSN
      - key: select
        type: select
        unsolicited: false
        pair: on_select_fulfillment_array
        owner: BAP
        expect: false
        input:
          - label: items
            name: items
            type: nestedSelect
          - name: providerId
            label: Enter provider id
            type: text
          - name: locationId
            label: Enter location id
            type: text
          - name: gps
            label: Enter gps coordinates
            type: text
            default: 12.4535,77.9283
          - name: area_code
            label: Enter area code
            type: text
            default: "110088"
      - key: on_select_fulfillment_array
        type: on_select
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: init_fulfillment_array
        type: init
        unsolicited: false
        pair: on_init_fulfillment_array
        owner: BAP
        expect: false
      - key: on_init_fulfillment_array
        type: on_init
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: confirm
        type: confirm
        unsolicited: false
        pair: on_confirm
        owner: BAP
        expect: false
      - key: on_confirm
        type: on_confirm
        unsolicited: false
        pair: null
        owner: BPP
        expect: false
      - key: on_status_pending
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_packed
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_agent_assigned
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_pickup
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_picked
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_at_delivery
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
      - key: on_status_order_delivered
        type: on_status
        unsolicited: true
        pair: null
        owner: BPP
        expect: false
