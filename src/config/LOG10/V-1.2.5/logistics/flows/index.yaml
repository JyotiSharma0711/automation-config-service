flows:
  - id: FEATURE_DISCOVERY
    description: Feature discovery for point-to-point logistics operations
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: Buyer searches for point-to-point delivery options
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery

            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
          - name: feature_discovery
            label: Features supported
            type: checkbox
            options:
              - code: "00B"
                name: "Updated cancellation codes"
              - code: "00F"
                name: "ePOD"
              - code: "017"
                name: "Surge fee"
              - code: "019"
                name: "eWay bill"
              - code: "01A"
                name: "Cancellation terms"
              - code: "01C"
                name: "SLA metrics"
              - code: "01D"
                name: "Publish special capabilities"
              - code: "01E"
                name: "RCM self-declaration"
              - code: "01F"
                name: "Codified static terms"
              - code: "020"
                name: "Exchange customer support contact details"
              - code: "021"
                name: "Differential weight charges"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: Logistics provider responds with available delivery options
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            label: Features supported
            type: checkbox
            options:
              - code: "003"
                name: "Rate Card for P2P"
              - code: "004"
                name: "Rate Card for P2H2P"
              - code: "005"
                name: "Quick Commerce Logistics"
              - code: "006"
                name: "Milk Run Logistics"
              - code: "007"
                name: "Single pickup multi drop (SPMD)"
              - code: "008"
                name: "COD order"
              - code: "009"
                name: "Static OTP verification (pickup & delivery)"
              - code: "00A"
                name: "Static OTP verification (RTO)"
              - code: "00B"
                name: "Updated cancellation codes"
              - code: "00D"
                name: "Payment wallet"
              - code: "00F"
                name: "ePOD"
              - code: "010"
                name: "Call Masking"
              - code: "011"
                name: "Update delivery address"
              - code: "012"
                name: "Update pickup & delivery authorization"
              - code: "013"
                name: "Seller & buyer instructions"
              - code: "014"
                name: "Seller Creds"
              - code: "015"
                name: "Dynamic OTP verification (pickup & delivery)"
              - code: "016"
                name: "Dynamic OTP verification (RTO)"
              - code: "017"
                name: "Surge fee"
              - code: "018"
                name: "Partial RTO"
              - code: "019"
                name: "eWay bill"
              - code: "01A"
                name: "Cancellation terms"
              - code: "01B"
                name: "Reverse QC"
              - code: "01C"
                name: "SLA metrics"
              - code: "01D"
                name: "Publish special capabilities"
              - code: "01E"
                name: "RCM self-declaration"
              - code: "01F"
                name: "Codified static terms"
              - code: "020"
                name: "Exchange customer support contact details"
              - code: "021"
                name: "Differential weight charges"
              - code: "022"
                name: "RTO (with return)"
  - id: ORDER_FLOW_BASE_LINE
    description: Standard point-to-point delivery flow including baseline features
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery
            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and provides quote breakup
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: LBNP sends order confirmation
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP accepts the order
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: LBNP updates order details
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP acknowledges order updates and searches for an agent.
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order picked up]
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: Buyer requests delivery tracking
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP provides order tracking information (gps or url)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order delivered]
        pair: null
        owner: BPP
  - id: RTO_FLOW
    description: Flow for Return to Origin (RTO) when buyer is unavailable or delivery fails. A separate RTO fulfillment is created and linked to the forward shipment. RTO quote is added before RTO completes. RTO ends with Delivered or Disposed, completing the order.
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request for logistics services
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery

            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog of delivery services
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            display: false
            default:
              - "022"
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes logistics order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and shares quote breakdown
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: LBNP confirms logistics order
        pair: on_confirm_LOGISTICS
        owner: BAP
        input:
          - name: returnToOrigin
            label: Return to origin
            type: select
            values:
              - "yes"
              - "no"
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP accepts the logistics order
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: LBNP updates logistics order details
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP updates logistics order status or info
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP status update - Order picked up
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP status update - At-delivery
        pair: null
        owner: BPP
      - key: on_cancel_LOGISTICS
        type: on_cancel
        unsolicited: false
        description: LSP initiates Return to Origin (RTO)
        pair: null
        owner: BPP
      - key: on_status_4_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP status update - RTO Delivered
        pair: null
        owner: BPP
  - id: CASH_ON_DELIVERY_FLOW
    description: This flow defines the logistics process for Cash on Delivery (COD) retail orders, ensuring proper tracking and settlement between Logistics Buyer Network Participants (LBNPs) and Logistics Service Providers (LSPs).
    sequence:
      - key: search_1_LOGISITCS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery

            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog and COD support
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            display: false
            default:
              - "008"
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP initializes order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and provides quote with COD charges
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: LBNP confirms the COD order including COD settlement details
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP confirms and accepts the COD order
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: LBNP updates order details
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP updates order info
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates status [Order picked up]
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: LBNP requests tracking details
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP shares tracking details (GPS or URL)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates status [Order delivered and COD charge collected]
        pair: null
        owner: BPP
  - id: PREPAID_PAYMENT_FLOW
    description: This flow outlines the Payment Wallet process for Logistics Service Providers (LSPs), enabling them to establish a prepaid wallet system for logistics buyers.Payments for services are deducted directly from this wallet, ensuring a seamless and efficient transaction process.
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery

            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - ON-ORDER
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            display: false
            default:
              - "00D"
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes order (ON-ORDER payment type)
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: >
          LSP acknowledges and provides quote breakup, including current wallet balance.
          Wallet balance is blocked at this stage.
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: >
          LBNP confirms the order. Upon confirmation, LSP deducts wallet amount.
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: >
          LSP accepts the order and auto-debits wallet.
          If balance is insufficient, order is rejected with error code.
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: >
          LBNP updates order details.
          If the order is cancelled, wallet debit must be reversed by LSP.
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP acknowledges order updates and searches for an agent.
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: false
        description: LSP updates order status
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: LBNP requests for tracking information
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP provides order tracking information (gps or url)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order delivered]
        pair: null
        owner: BPP
  - id: IMMEDIATE_DELIVERY_FLOW
    description: The Immediate Delivery Flow outlines the process for confirming and updating logistics orders with the Logistics Service Provider (LSP) and the Logistics Buyer Network Partner (LBNP). This flow is mainly for F&B and Grocery orders. Ship to delivery (S2D) TAT for the same is less than 60 minutes.
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Immediate Delivery
            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and provides quote breakup
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: >
          LBNP sends order confirmation, may set "ready_to_ship" = "yes"
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP accepts the order
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: >
          LBNP sends "order_ready" = "yes" via /update to notify LSP that the order is ready for pickup.
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP acknowledges order update
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order picked up]
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: LBNP requests for tracking information
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP provides order tracking information (GPS coordinates)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order delivered]
        pair: null
        owner: BPP
  # - id: QUICK_COMMERCE_FLOW
  #   description: This flow covers logistics for Quick Commerce, Milk Run, and SPMD models, enabling coordination between LBNPs and LSPs.
  #   sequence:
  #     - key: search_LOGISTICS
  #       type: search
  #       unsolicited: false
  #       description: LBNP initiates a search request with parameters like order count, no. of riders required.
  #       pair: on_search_LOGISTICS
  #       owner: BAP
  #       expect: true
  #       input:
  #         - name: retailCategory
  #           label: Select retail item category
  #           type: select
  #           values:
  #             - F&B
  #             - Grocery
  #             - Fashion
  #             - BPC
  #             - Electronics
  #             - Appliances
  #             - Home & Kitchen
  #             - Health & Wellness
  #             - Pharma
  #             - Auto components
  #             - C2C parcels
  #         - name: category
  #           label: Select a category
  #           type: select
  #           values:
  #             - Immediate Delivery
  #             - Next Day Delivery
  #             - Same Day Delivery
  #             - Instant Delivery
  #           payloadField: $.message.intent.category.id
  #         - name: paymentType
  #           label: Select payment type
  #           type: select
  #           values:
  #             - POST-FULFILLMENT
  #             - ON-ORDER
  #             - ON-FULFILLMENT
  #           payloadField: $.message.intent.payment.type
  #         - name: fulfillRequest
  #           label: Select fulfillment request parameter
  #           type: select
  #           values:
  #             - Rider
  #             - Order
  #         - name: city_code
  #           label: Enter city code
  #           type: text
  #           payloadField: $.context.city
  #           default: "std:080"
  #         - name: start_gps
  #           label: Enter start gps coordinates
  #           type: text
  #           payloadField: $.message.intent.fulfillment.start.location.gps
  #           default: 12.4535,77.9283
  #         - name: end_gps
  #           label: Enter end gps coordinates
  #           type: text
  #           payloadField: $.message.intent.fulfillment.end.location.gps
  #           default: 12.4535,77.9283
  #         - name: start_code
  #           label: Enter start area code
  #           type: text
  #           payloadField: $.message.intent.fulfillment.start.location.address.area_code
  #           default: "560001"
  #         - name: end_code
  #           label: Enter end area code
  #           type: text
  #           payloadField: $.message.intent.fulfillment.end.location.address.area_code
  #           default: "560001"
  #     - key: on_search_LOGISTICS
  #       type: on_search
  #       unsolicited: false
  #       description: LSP responds with catalog including fulfillment capacity, pricing guarantees, and incremental rates.
  #       pair: null
  #       owner: BPP
  #       input:
  #         - name: feature_discovery
  #           display: false
  #           default:
  #             - "005"
  #     - key: init_LOGISTICS
  #       type: init
  #       unsolicited: false
  #       description: LBNP selects and initializes order
  #       pair: on_init_LOGISTICS
  #       owner: BAP
  #     - key: on_init_LOGISTICS
  #       type: on_init
  #       unsolicited: false
  #       description: LSP acknowledges and provides quote breakup
  #       pair: null
  #       owner: BPP
  #     - key: confirm_LOGISTICS
  #       type: confirm
  #       unsolicited: false
  #       description: LBNP sends order confirmation
  #       pair: on_confirm_LOGISTICS
  #       owner: BAP
  #     - key: on_confirm_LOGISTICS
  #       type: on_confirm
  #       unsolicited: false
  #       description: LSP accepts the order
  #       pair: null
  #       owner: BPP
  #     - key: on_status_11_LOGISTICS
  #       type: on_status
  #       unsolicited: true
  #       description: LSP updates order status [Agent assigned] and provides rider details to LBNP.
  #       pair: null
  #       owner: BPP
  #     - key: update_LOGISTICS
  #       type: update
  #       unsolicited: false
  #       description: LBNP updates linked order details and assigns riders to the fulfillments.
  #       pair: on_update_LOGISTICS
  #       owner: BAP
  #     - key: on_update_LOGISTICS
  #       type: on_update
  #       unsolicited: false
  #       description: LSP acknowledges order updates and searches for an agent.
  #       pair: null
  #       owner: BPP
  #     - key: on_status_1_LOGISTICS
  #       type: on_status
  #       unsolicited: true
  #       description: LSP updates order status [Order picked up]
  #       pair: null
  #       owner: BPP
  #     - key: on_status_12_LOGISTICS
  #       type: on_status
  #       unsolicited: true
  #       description: LSP updates order status [At-delivery]
  #       pair: null
  #       owner: BPP
  #     - key: on_status_3_LOGISTICS
  #       type: on_status
  #       unsolicited: true
  #       description: LSP updates order status [Order delivered]
  #       pair: null
  #       owner: BPP
  - id: SURGE_FEE_FLOW
    description: This Flow outlines the process for confirming and updating logistics orders with the Logistics Service Provider (LSP) and the Logistics Buyer Network Partner (LBNP). This flow is mainly for F&B and Grocery orders. Here the LSP adds an additional surge charge due to any operational reason.
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery
            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
          - name: feature_discovery
            display: false
            default:
              - "017"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog (may provide surge charge)
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            display: false
            default:
              - "017"
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and provides quote breakup
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: >
          LBNP sends order confirmation
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP accepts the order (add the surge charge in the quote)
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: >
          LBNP marks the order as ready to be shipped.
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP acknowledges order update and searches for an agent.
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order picked up]
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: LBNP requests for tracking information
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP provides order tracking information (GPS coordinates)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order delivered]
        pair: null
        owner: BPP
  - id: CANCELLATION_TERMS_FLOW
    description: This Flow outlines the process for confirming and updating logistics orders with the Logistics Service Provider (LSP) and the Logistics Buyer Network Partner (LBNP). Here the LSP provides cancellation terms which would be applicable in case of a cancellation.
    sequence:
      - key: search_LOGISTICS
        type: search
        unsolicited: false
        description: LBNP sends a search request
        pair: on_search_LOGISTICS
        owner: BAP
        expect: true
        input:
          - name: retailCategory
            label: Select retail item category
            type: select
            values:
              - F&B
              - Grocery
              - Fashion
              - BPC
              - Electronics
              - Appliances
              - Home & Kitchen
              - Health & Wellness
              - Pharma
              - Auto components
              - C2C parcels
          - name: category
            label: Select a category
            type: select
            values:
              - Standard Delivery
              - Immediate Delivery
              - Next Day Delivery
              - Same Day Delivery
            payloadField: $.message.intent.category.id
          - name: paymentType
            label: Select payment type
            type: select
            values:
              - POST-FULFILLMENT
              - ON-ORDER
              - ON-FULFILLMENT
            payloadField: $.message.intent.payment.type
          - name: city_code
            label: Enter city code
            type: text
            payloadField: $.context.city
            default: "std:080"
          - name: start_gps
            label: Enter start gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.start.location.gps
            default: 12.4535,77.9283
          - name: end_gps
            label: Enter end gps coordinates
            type: text
            payloadField: $.message.intent.fulfillment.end.location.gps
            default: 12.4535,77.9283
          - name: start_code
            label: Enter start area code
            type: text
            payloadField: $.message.intent.fulfillment.start.location.address.area_code
            default: "560001"
          - name: end_code
            label: Enter end area code
            type: text
            payloadField: $.message.intent.fulfillment.end.location.address.area_code
            default: "560001"
          - name: feature_discovery
            display: false
            default:
              - "01A"
      - key: on_search_LOGISTICS
        type: on_search
        unsolicited: false
        description: LSP responds with catalog
        pair: null
        owner: BPP
        input:
          - name: feature_discovery
            display: false
            default:
              - "01A"
      - key: init_LOGISTICS
        type: init
        unsolicited: false
        description: LBNP selects and initializes order
        pair: on_init_LOGISTICS
        owner: BAP
      - key: on_init_LOGISTICS
        type: on_init
        unsolicited: false
        description: LSP acknowledges and provides quote breakup alone with cancellation terms.
        pair: null
        owner: BPP
      - key: confirm_LOGISTICS
        type: confirm
        unsolicited: false
        description: >
          LBNP sends order confirmation
        pair: on_confirm_LOGISTICS
        owner: BAP
      - key: on_confirm_LOGISTICS
        type: on_confirm
        unsolicited: false
        description: LSP accepts the order
        pair: null
        owner: BPP
      - key: update_LOGISTICS
        type: update
        unsolicited: false
        description: >
          LBNP marks the order as ready to be shipped.
        pair: on_update_LOGISTICS
        owner: BAP
      - key: on_update_LOGISTICS
        type: on_update
        unsolicited: false
        description: LSP acknowledges order update and searches for an agent.
        pair: null
        owner: BPP
      - key: on_status_13_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Agent-assigned]
        pair: null
        owner: BPP
      - key: on_status_5_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status (At-pickup)
        pair: null
        owner: BPP
      - key: on_status_1_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order picked up]
        pair: null
        owner: BPP
      - key: track_LOGISTICS
        type: track
        unsolicited: false
        description: LBNP requests for tracking information
        pair: on_track_LOGISTICS
        owner: BAP
      - key: on_track_LOGISTICS
        type: on_track
        unsolicited: false
        description: LSP provides order tracking information (GPS coordinates)
        pair: null
        owner: BPP
      - key: on_status_12_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [At-delivery]
        pair: null
        owner: BPP
      - key: on_status_3_LOGISTICS
        type: on_status
        unsolicited: true
        description: LSP updates order status [Order delivered]
        pair: null
        owner: BPP
- id: STATIC_OTP_PICKUP_DELIVERY
  description: This Flow outlines the process for confirming and updating logistics orders with the Logistics Service Provider (LSP) and the Logistics Buyer Network Partner (LBNP). Here the LBNP provides static OTP for pickup and delivery verification.
  sequence:
          - key: search_2_LOGISITCS
            type: search
            unsolicited: false
            description: LBNP sends a search request
            pair: on_search_LOGISTICS
            owner: BAP
            expect: true
            input:
              - name: retailCategory
                label: Select retail item category
                type: select
                values:
                  - F&B
                  - Grocery
                  - Fashion
                  - BPC
                  - Electronics
                  - Appliances
                  - Home & Kitchen
                  - Health & Wellness
                  - Pharma
                  - Auto components
                  - C2C parcels
              - name: category
                label: Select a category
                type: select
                values:
                  - Standard Delivery
                  - Immediate Delivery
                  - Next Day Delivery
                  - Same Day Delivery
                payloadField: $.message.intent.category.id
              - name: paymentType
                label: Select payment type
                type: select
                values:
                  - POST-FULFILLMENT
                  - ON-ORDER
                  - ON-FULFILLMENT
                payloadField: $.message.intent.payment.type
              - name: city_code
                label: Enter city code
                type: text
                payloadField: $.context.city
                default: "std:080"
              - name: start_gps
                label: Enter start gps coordinates
                type: text
                payloadField: $.message.intent.fulfillment.start.location.gps
                default: 12.4535,77.9283
              - name: end_gps
                label: Enter end gps coordinates
                type: text
                payloadField: $.message.intent.fulfillment.end.location.gps
                default: 12.4535,77.9283
              - name: start_code
                label: Enter start area code
                type: text
                payloadField: $.message.intent.fulfillment.start.location.address.area_code
                default: "560001"
              - name: end_code
                label: Enter end area code
                type: text
                payloadField: $.message.intent.fulfillment.end.location.address.area_code
                default: "560001"
          - key: on_search_LOGISTICS
            type: on_search
            unsolicited: false
            description: LSP responds with catalog
            pair: null
            owner: BPP
            input:
              - name: feature_discovery
                display: false
                default:
                  - "009"
          - key: init_LOGISTICS
            type: init
            unsolicited: false
            description: LBNP selects and initializes order
            pair: on_init_LOGISTICS
            owner: BAP
          - key: on_init_LOGISTICS
            type: on_init
            unsolicited: false
            description: LSP acknowledges and provides quote breakup alone with cancellation terms.
            pair: null
            owner: BPP
          - key: confirm_LOGISTICS
            type: confirm
            unsolicited: false
            description: >
              LBNP sends order confirmation
            pair: on_confirm_LOGISTICS
            owner: BAP
          - key: on_confirm_LOGISTICS
            type: on_confirm
            unsolicited: false
            description: LSP accepts the order
            pair: null
            owner: BPP
          - key: update_LOGISTICS
            type: update
            unsolicited: false
            description: >
              LBNP marks the order as ready to be shipped.
            pair: on_update_LOGISTICS
            owner: BAP
          - key: on_update_LOGISTICS
            type: on_update
            unsolicited: false
            description: LSP acknowledges order update and searches for an agent.
            pair: null
            owner: BPP
          - key: on_status_13_LOGISTICS
            type: on_status
            unsolicited: true
            description: LSP updates order status [Agent-assigned]
            pair: null
            owner: BPP
          - key: on_status_5_LOGISTICS
            type: on_status
            unsolicited: true
            description: LSP updates order status (At-pickup)
            pair: null
            owner: BPP
          - key: on_status_1_LOGISTICS
            type: on_status
            unsolicited: true
            description: LSP updates order status [Order picked up]
            pair: null
            owner: BPP
          - key: track_LOGISTICS
            type: track
            unsolicited: false
            description: LBNP requests for tracking information
            pair: on_track_LOGISTICS
            owner: BAP
          - key: on_track_LOGISTICS
            type: on_track
            unsolicited: false
            description: LSP provides order tracking information (GPS coordinates)
            pair: null
            owner: BPP
          - key: on_status_12_LOGISTICS
            type: on_status
            unsolicited: true
            description: LSP updates order status [At-delivery]
            pair: null
            owner: BPP
          - key: on_status_3_LOGISTICS
            type: on_status
            unsolicited: true
            description: LSP updates order status [Order delivered]
            pair: null
            owner: BPP
- id: STATIC_OTP_RTO_DELIVERY
  description: Flow for Return to Origin (RTO) when buyer is unavailable or delivery fails. A separate RTO fulfillment is created and linked to the forward shipment. RTO quote is added before RTO completes. RTO ends with Delivered or Disposed, completing the order. Here LBNP provides static OTP for RTO delivery verification.
  sequence:
              - key: search_3_LOGISITCS
                type: search
                unsolicited: false
                description: LBNP sends a search request for logistics services
                pair: on_search_LOGISTICS
                owner: BAP
                expect: true
                input:
                  - name: retailCategory
                    label: Select retail item category
                    type: select
                    values:
                      - F&B
                      - Grocery
                      - Fashion
                      - BPC
                      - Electronics
                      - Appliances
                      - Home & Kitchen
                      - Health & Wellness
                      - Pharma
                      - Auto components
                      - C2C parcels
                  - name: category
                    label: Select a category
                    type: select
                    values:
                      - Standard Delivery
                      - Immediate Delivery
                      - Next Day Delivery
                      - Same Day Delivery
        
                    payloadField: $.message.intent.category.id
                  - name: paymentType
                    label: Select payment type
                    type: select
                    values:
                      - POST-FULFILLMENT
                      - ON-ORDER
                      - ON-FULFILLMENT
                    payloadField: $.message.intent.payment.type
                  - name: city_code
                    label: Enter city code
                    type: text
                    payloadField: $.context.city
                    default: "std:080"
                  - name: start_gps
                    label: Enter start gps coordinates
                    type: text
                    payloadField: $.message.intent.fulfillment.start.location.gps
                    default: 12.4535,77.9283
                  - name: end_gps
                    label: Enter end gps coordinates
                    type: text
                    payloadField: $.message.intent.fulfillment.end.location.gps
                    default: 12.4535,77.9283
                  - name: start_code
                    label: Enter start area code
                    type: text
                    payloadField: $.message.intent.fulfillment.start.location.address.area_code
                    default: "560001"
                  - name: end_code
                    label: Enter end area code
                    type: text
                    payloadField: $.message.intent.fulfillment.end.location.address.area_code
                    default: "560001"
              - key: on_search_LOGISTICS
                type: on_search
                unsolicited: false
                description: LSP responds with catalog of delivery services
                pair: null
                owner: BPP
                input:
                  - name: feature_discovery
                    display: false
                    default:
                      - "022"
                  - name: feature_discovery
                    display: false
                    default:
                      - "00A"
              - key: init_LOGISTICS
                type: init
                unsolicited: false
                description: LBNP selects and initializes logistics order
                pair: on_init_LOGISTICS
                owner: BAP
              - key: on_init_LOGISTICS
                type: on_init
                unsolicited: false
                description: LSP acknowledges and shares quote breakdown
                pair: null
                owner: BPP
              - key: confirm_LOGISTICS
                type: confirm
                unsolicited: false
                description: LBNP confirms logistics order
                pair: on_confirm_LOGISTICS
                owner: BAP
                input:
                  - name: returnToOrigin
                    label: Return to origin
                    type: select
                    values:
                      - "yes"
                      - "no"
              - key: on_confirm_LOGISTICS
                type: on_confirm
                unsolicited: false
                description: LSP accepts the logistics order
                pair: null
                owner: BPP
              - key: update_LOGISTICS
                type: update
                unsolicited: false
                description: LBNP updates logistics order details
                pair: on_update_LOGISTICS
                owner: BAP
              - key: on_update_LOGISTICS
                type: on_update
                unsolicited: false
                description: LSP updates logistics order status or info
                pair: null
                owner: BPP
              - key: on_status_13_LOGISTICS
                type: on_status
                unsolicited: true
                description: LSP updates order status [Agent-assigned]
                pair: null
                owner: BPP
              - key: on_status_5_LOGISTICS
                type: on_status
                unsolicited: true
                description: LSP updates order status (At-pickup)
                pair: null
                owner: BPP
              - key: on_status_1_LOGISTICS
                type: on_status
                unsolicited: true
                description: LSP status update - Order picked up
                pair: null
                owner: BPP
              - key: on_status_12_LOGISTICS
                type: on_status
                unsolicited: true
                description: LSP status update - At-delivery
                pair: null
                owner: BPP
              - key: on_cancel_LOGISTICS
                type: on_cancel
                unsolicited: false
                description: LSP initiates Return to Origin (RTO)
                pair: null
                owner: BPP
              - key: on_status_4_LOGISTICS
                type: on_status
                unsolicited: true
                description: LSP status update - RTO Delivered
                pair: null
                owner: BPP